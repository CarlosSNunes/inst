<section id="vacancy-details-main-section" class="blue-background-color">
    <article>
        <div class="container">
            <div class="columns">
                <div class="column is-paddingless-vertical">
                    <app-breadcrumb [breadcrumbs]="breadcrumbs"></app-breadcrumb>

                    <h3 class="big-title">
                        Saiba mais sobre os nossos programas e vagas em aberto
                    </h3>
                </div>
            </div>
        </div>
    </article>
</section>

<section id="vacancy-informations">
    <article>
        <div class="container">
            <div class="columns">
                <div class="column is-6-desktop is-full">

                    <h4 class="big-title">
                        {{vacancy?.name}}
                    </h4>

                    <p class="description" *ngFor="let description of vacancy?.descriptions">
                        {{description}}
                    </p>

                    <p class="sub-description" *ngFor="let subDescription of vacancy?.subDescriptions">
                        {{subDescription}}
                    </p>

                    <ul class="pre-requisites">
                        <li *ngFor="let preRequisite of vacancy?.preRequisites">
                            {{preRequisite}}
                        </li>
                    </ul>

                    <p class="sub-description" *ngFor="let extraDescription of vacancy?.extraDescriptions">
                        {{extraDescription}}
                    </p>
                </div>

                <div class="column is-6-desktop is-full">
                    <h4 class="big-title">
                        Cadastre-se
                    </h4>
                    <form [formGroup]="vacancyForm">
                        <div class="field">
                            <p class="control">
                                <input
                                    [ngClass]="{ 'is-valid': !form.nome.errors, 'is-invalid' : form.nome.dirty && form.nome.errors, 'is-touched': form.nome.value.length > 0 }"
                                    class="input" formControlName="nome" type="text">
                                <label class="label">*Nome completo</label>
                            </p>
                            <div *ngIf="form.nome.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.nome)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>

                        <div class="field">
                            <p class="control">
                                <input
                                    [ngClass]="{ 'is-valid': !form.email.errors, 'is-invalid' : form.email.dirty && form.email.errors, 'is-touched': form.email.value.length > 0 }"
                                    class="input" formControlName="email" type="email">
                                <label class="label">*E-mail</label>
                            </p>
                            <div *ngIf="form.email.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.email)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>

                        <div class="field">
                            <p class="control">
                                <input
                                    [ngClass]="{ 'is-valid': !form.telefone.errors, 'is-invalid' : form.telefone.dirty && form.telefone.errors, 'is-touched': form.telefone.value.length > 0 }"
                                    class="input" formControlName="telefone" type="text"
                                    [mask]="form.telefone?.value?.length > 10 ? '(00) 00000-0000' : '(00) 0000-00000'"
                                    [validation]="false">
                                <label class="label">*Telefone</label>
                            </p>
                            <div *ngIf="form.telefone.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.telefone)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                        <div class="field">
                            <app-dropdown [options]="dropDownOptions" [default]="{ key: 'Área de atuação', value: '' }"
                                (setFilter)="changeActionArea($event);"></app-dropdown>
                            <div *ngIf="form.area.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.area)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                        <p class="input-file-label">
                            Envie seu curriculum
                        </p>

                        <div class="field">
                            <div class="control">
                                <div class="file has-name">
                                    <label class="file-label">
                                        <input (change)="fileChangeEvent($event, false)" class="file-input" type="file">
                                        <span class="file-cta">
                                            <span class="file-label">
                                                Escolher arquivo &nbsp;
                                                <svg width="24" height="16" viewBox="0 0 24 16" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg">
                                                    <path
                                                        d="M19.35 6.04C18.67 2.59 15.64 0 12 0C9.11 0 6.6 1.64 5.35 4.04C2.34 4.36 0 6.91 0 10C0 13.31 2.69 16 6 16H19C21.76 16 24 13.76 24 11C24 8.36 21.95 6.22 19.35 6.04ZM14 9V13H10V9H7L12 4L17 9H14Z"
                                                        fill="white" />
                                                </svg>
                                            </span>
                                        </span>
                                        <span class="file-name">
                                            {{filesNumber == 1 ? filesNumber + ' arquivo selecionado' :  'Nenhum arquivo selecionado'}}
                                        </span>
                                    </label>
                                    <div *ngFor="let file of files; let i = index;" class="file-details"
                                        [class.first]="i === 0">
                                        <h5 class="file-name-with-extension">
                                            {{file.name}}
                                            <span class="trash-icon" (click)="deleteFile(i)">
                                                <img src="assets/svg/trash.svg" alt="Deletar">
                                            </span>
                                        </h5>
                                        <p class="file-size">
                                            {{filerHelper.humanFileSize(file.size, false)}}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="field">
                            <p class="control">
                                <textarea name="mensagem" cols="30" rows="10"
                                    [ngClass]="{ 'is-valid': !form.mensagem.errors, 'is-invalid' : form.mensagem.dirty && form.mensagem.errors, 'is-touched': form.mensagem.value.length > 0 }"
                                    class="textarea" formControlName="mensagem" placeholder="Mensagem"></textarea>
                            </p>
                            <div *ngIf="form.mensagem.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.mensagem)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>

                        <p class="required-fields-info">
                            *O preenchimento dos campos com <strong>* são obrigatórios.</strong>
                        </p>

                        <button class="btn btn-digital-cian secondary arrow-right medium is-hidden-touch"
                            [disabled]="!vacancyForm.valid" (click)="subscribe()">
                            ENVIAR
                        </button>

                        <button class="btn btn-digital-cian tertiary arrow-right medium is-hidden-desktop"
                            [disabled]="!vacancyForm.valid" (click)="subscribe()">
                            ENVIAR
                        </button>
                    </form>

                </div>
            </div>
        </div>
    </article>
</section>

<app-learn-more></app-learn-more>

<section id="see-all-vacancies">
    <article>
        <div class="container">
            <div class="columns">
                <div class="column">
                    <div class="blue-background-color custom-padding">
                        <div class="columns">
                            <div class="column is-6 desktop is-full">
                                <h4 class="big-title">
                                    Veja todas as vagas disponíveis
                                </h4>

                                <p class="sub-description">
                                    Encontre a vaga ideal para seu perfil.
                                </p>
                            </div>
                            <div class="column is-6 desktop is-full">
                                <a routerLink="/carreiras/vagas"
                                    class="btn btn-digital-cian secondary arrow-right medium is-hidden-touch">
                                    VER TODAS AS VAGAS
                                </a>

                                <a routerLink="/carreiras/vagas"
                                    class="btn btn-digital-cian tertiary arrow-right medium is-hidden-desktop">
                                    VER TODAS AS VAGAS
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </article>
</section>