<form [formGroup]="contatoForm">
    <div class="columns flex-wrap has-negative-margin">

        <div class="column is-full-touch is-4-desktop display-flex">
            <label class="align-self-center">
                Identifique-se
            </label>
        </div>

        <div class="column is-full-touch is-8-desktop">
            <app-dropdown [options]="types" [default]="defaultType" [canUnselect]="false"
                (setFilter)="selectType($event)">
            </app-dropdown>
            <div class="field" *ngIf="form?.IdTipo?.errors?.length > 0">
                <div class="errors">
                    <p *ngFor="let error of getErrors(form.IdTipo)" class="help is-danger">
                        {{error}}
                    </p>
                </div>
            </div>
        </div>

        <div class="columns w-100 flex-wrap is-mobile" *ngIf="form.IdTipo.touched">

            <div class="column is-full-touch is-6-desktop" *ngIf="formFields.NomeEntidade.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.NomeEntidade?.errors && form?.NomeEntidade?.touched, 'is-invalid' : form.NomeEntidade?.dirty && form?.NomeEntidade?.errors, 'is-touched': form?.NomeEntidade?.value?.length > 0 }"
                            class="input" formControlName="NomeEntidade" type="text">
                        <label class="label">{{formFields.NomeEntidade.label}} *</label>
                    </p>
                    <div *ngIf="form.NomeEntidade.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.NomeEntidade)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>


            <div class="column is-full-touch is-6-desktop" *ngIf="formFields.NomeContato.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.NomeContato?.errors && form?.NomeContato?.touched, 'is-invalid' : form.NomeContato?.dirty && form?.NomeContato?.errors, 'is-touched': form?.NomeContato?.value?.length > 0 }"
                            class="input" formControlName="NomeContato" type="text">
                        <label class="label">{{formFields.NomeContato.label}} *</label>
                    </p>
                    <div *ngIf="form.NomeContato.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.NomeContato)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-full-touch is-6-desktop" *ngIf="formFields.CPFCNPJ.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.CPFCNPJ?.errors && form?.CPFCNPJ?.touched, 'is-invalid' : form.CPFCNPJ?.dirty && form?.CPFCNPJ?.errors && form?.CPFCNPJ?.touched, 'is-touched': form?.CPFCNPJ?.value?.length > 0 }"
                            [mask]="formFields.CPFCNPJ.mask" [validation]="false" class="input"
                            formControlName="CPFCNPJ" type="tel">
                        <label class="label">{{formFields.CPFCNPJ.label}}
                            {{formFields.CPFCNPJ.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.CPFCNPJ.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.CPFCNPJ, formFields.CPFCNPJ.label)"
                            class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-full-touch is-6-desktop" *ngIf="formFields.CodigoCarePlus.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.CodigoCarePlus?.errors && form?.CodigoCarePlus?.touched, 'is-invalid' : form.CodigoCarePlus?.dirty && form?.CodigoCarePlus?.errors, 'is-touched': form?.CodigoCarePlus?.value?.length > 0 }"
                            class="input" formControlName="CodigoCarePlus" type="tel" appOnlyNumbers>
                        <label class="label">{{formFields.CodigoCarePlus.label}}
                            {{formFields.CodigoCarePlus.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.CodigoCarePlus.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.CodigoCarePlus)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-2-desktop is-4-touch" *ngIf="formFields.DDDTelefone1.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.DDDTelefone1?.errors && form?.DDDTelefone1?.touched, 'is-invalid' : form.DDDTelefone1?.dirty && form?.DDDTelefone1?.errors, 'is-touched': form?.DDDTelefone1?.value?.length > 0 }"
                            class="input" formControlName="DDDTelefone1" type="tel" mask="000" [validation]="false">
                        <label class="label">{{formFields.DDDTelefone1.label}}
                            {{formFields.DDDTelefone1.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.DDDTelefone1.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.DDDTelefone1, 'DDD 1')" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-4-desktop is-8-touch" *ngIf="formFields.Telefone1.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.Telefone1?.errors && form?.Telefone1?.touched, 'is-invalid' : form.Telefone1?.dirty && form?.Telefone1?.errors, 'is-touched': form?.Telefone1?.value?.length > 0 }"
                            class="input" formControlName="Telefone1" type="tel"
                            [mask]="form.Telefone1?.value?.length > 8 ? '00000-0000' : '0000-00000'"
                            [validation]="false">
                        <label class="label">{{formFields.Telefone1.label}}
                            {{formFields.Telefone1.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.Telefone1.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.Telefone1, 'Telefone 1')" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-2-desktop is-4-touch" *ngIf="formFields.DDDTelefone2.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.DDDTelefone2?.errors && form?.DDDTelefone2?.touched, 'is-invalid' : form.DDDTelefone2?.dirty && form?.DDDTelefone2?.errors, 'is-touched': form?.DDDTelefone2?.value?.length > 0 }"
                            class="input" formControlName="DDDTelefone2" type="tel" mask="000" [validation]="false">
                        <label class="label">{{formFields.DDDTelefone2.label}}
                            {{formFields.DDDTelefone2.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.DDDTelefone2.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.DDDTelefone2, 'DDD 2')" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-4-desktop is-8-touch" *ngIf="formFields.Telefone2.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.Telefone2?.errors && form?.Telefone2?.touched, 'is-invalid' : form.Telefone2?.dirty && form?.Telefone2?.errors, 'is-touched': form?.Telefone2?.value?.length > 0 }"
                            class="input" formControlName="Telefone2" type="tel"
                            [mask]="form.Telefone2?.value?.length > 8 ? '00000-0000' : '0000-00000'"
                            [validation]="false">
                        <label class="label">{{formFields.Telefone2.label}}
                            {{formFields.Telefone2.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.Telefone2.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.Telefone2, 'Telefone 2')" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-full-touch is-6-desktop" *ngIf="formFields.Certificado.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.Certificado?.errors && form?.Certificado?.touched, 'is-invalid' : form.Certificado?.dirty && form?.Certificado?.errors, 'is-touched': form?.Certificado?.value?.length > 0 }"
                            class="input" formControlName="Certificado" type="tel" appOnlyNumbers>
                        <label class="label">{{formFields.Certificado.label}}
                            {{formFields.Certificado.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.Certificado.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.Certificado)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column" *ngIf="formFields.Email.canShow">
                <div class="field">
                    <p class="control">
                        <input
                            [ngClass]="{ 'is-valid': !form?.Email?.errors && form?.Email?.touched, 'is-invalid' : form.Email?.dirty && form?.Email?.errors, 'is-touched': form?.Email?.value?.length > 0 }"
                            class="input" formControlName="Email" type="text">
                        <label class="label">{{formFields.Email.label}}
                            {{formFields.Email.required ? '*': ''}}</label>
                    </p>
                    <div *ngIf="form.Email.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.Email)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-full">
                <div class="columns display-flex has-negative-margin">
                    <div class="column is-full-touch is-3-desktop display-flex is-paddingless-vertical"
                        *ngIf="formFields.Assunto.canShow">
                        <label class="align-self-center">
                            {{formFields.Assunto.label}}
                            {{formFields.Assunto.required ? '*': ''}}
                        </label>
                    </div>

                    <div class="column is-full-touch is-9-desktop is-paddingless-vertical"
                        *ngIf="formFields.Assunto.canShow">
                        <app-dropdown [options]="subjects" [default]="defaultSubject" [canUnselect]="false"
                            (setFilter)="selectSubject($event)">
                        </app-dropdown>
                        <div class="field" *ngIf="!form?.Assunto?.valid && form?.Assunto?.touched">
                            <div class="errors">
                                <p *ngFor="let error of getErrors(form.Assunto)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="column is-full" *ngIf="formFields.Comentario.canShow">
                <div class="field">
                    <p class="control">
                        <textarea name="Comentario" cols="30" rows="10"
                            [ngClass]="{ 'is-valid': !form.Comentario?.errors, 'is-invalid' : form.Comentario.dirty && form.Comentario?.errors, 'is-touched': form.Comentario?.value?.length > 0 }"
                            class="textarea" formControlName="Comentario" placeholder="Comentário"></textarea>
                    </p>
                    <div *ngIf="form.Comentario.touched" class="errors">
                        <p *ngFor="let error of getErrors(form.Comentario, 'Comentário')" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
            </div>

            <div class="column is-full" *ngIf="formFields.lstAnexo.canShow">
                <div class="field">
                    <div class="control">
                        <div class="file has-name">
                            <label class="file-label">
                                <input (change)="fileChangeEvent($event)" class="file-input" type="file" multiple
                                    accept="image/x-png,image/gif,image/jpeg, image/x-ms-bmp, application/pdf">
                                <span class="file-cta">
                                    <span class="file-label">
                                        Escolher arquivos &nbsp;
                                        <svg width="24" height="16" viewBox="0 0 24 16" fill="none"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M19.35 6.04C18.67 2.59 15.64 0 12 0C9.11 0 6.6 1.64 5.35 4.04C2.34 4.36 0 6.91 0 10C0 13.31 2.69 16 6 16H19C21.76 16 24 13.76 24 11C24 8.36 21.95 6.22 19.35 6.04ZM14 9V13H10V9H7L12 4L17 9H14Z"
                                                fill="white" />
                                        </svg>
                                    </span>
                                </span>
                                <span class="file-name">
                                    {{filesNumber == 1 ? filesNumber + ' arquivo selecionado' :  'Nenhum arquivo selecionado'}}
                                </span>
                            </label>
                            <p class="obs">
                                <strong>Importante:</strong> Extensões permitidas bmp, gif, jpg ou pdf, com no máximo
                                2mb.
                            </p>
                            <div *ngFor="let file of files; let i = index;" class="file-details"
                                [class.first]="i === 0">
                                <h5 class="file-name-with-extension">
                                    {{file.name}}
                                    <span class="trash-icon" (click)="deleteFile(i)">
                                        <img src="assets/svg/trash.svg" alt="Deletar">
                                    </span>
                                </h5>
                                <p class="file-size">
                                    {{filerHelper.humanFileSize(file.size, false)}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="column is-full-touch is-6-desktop display-flex" *ngIf="formFields.CaptchaCode.canShow">
                <div class="align-self-center code-infos">
                    <label>
                        CÓDIGO DE VERIFICAÇÃO*
                    </label>
                    <p>
                        Digite os caracteres que você
                        visualiza na figura ao lado
                    </p>
                </div>
            </div>

            <div class="column is-full-touch is-6-desktop">
                <div class="columns is-mobile captcha">
                    <div class="column is-6 display-flex">
                        <img class="captcha-image align-self-center"
                            src="data:image/gif;base64, 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"
                            alt="Captcha image">
                    </div>
                    <div class="column is-6">
                        <div class="field">
                            <p class="control">
                                <input
                                    [ngClass]="{ 'is-valid': !form?.CaptchaCode?.errors && form?.CaptchaCode?.touched, 'is-invalid' : form.CaptchaCode?.dirty && form?.CaptchaCode?.errors, 'is-touched': form?.CaptchaCode?.value?.length > 0 }"
                                    class="input" formControlName="CaptchaCode" type="tel" mask="00000"
                                    [validation]="false">
                                <label class="label">Código *</label>
                            </p>
                            <div *ngIf="form.CaptchaCode.touched" class="errors">
                                <p *ngFor="let error of getErrors(form.CaptchaCode, 'Código')" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="column is-full">
                <button class="btn btn-primary medium is-hidden-touch right" (click)="sendForm()">
                    ENVIAR
                </button>

                <button class="btn btn-text small is-hidden-desktop" (click)="sendForm()">
                    ENVIAR
                    <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M11.3492 0.938082C11.1433 1.24975 11.187 1.70309 11.4477 1.94993L13.2895 3.69461L15.7088 6.28211L0.600826 6.28211C0.268769 6.28211 -2.39681e-07 6.60482 -2.25521e-07 7.00246C-2.11362e-07 7.40009 0.268769 7.7228 0.600826 7.7228L15.5578 7.7228L11.3604 12.0703C11.1097 12.3297 11.0812 12.7849 11.2983 13.086C11.5154 13.3871 11.8947 13.4203 12.1459 13.16L17.6218 7.48797C17.7528 7.35254 17.8285 7.15613 17.8301 6.94867C17.8301 6.94675 17.8301 6.94483 17.8301 6.94291C17.8301 6.73737 17.7572 6.54191 17.6294 6.40553L14.0621 2.592L12.1932 0.819944C11.9328 0.573104 11.5551 0.625931 11.3492 0.938082Z"
                            fill="#0079C8" />
                    </svg>
                </button>
            </div>

        </div>

    </div>

</form>