<div class="container">
    <span>
        <fa-icon [icon]="faArrowCircleLeft" routerLink="/neocms/posts-blog/index" routerLinkActive="active">
        </fa-icon>
        Editar conteúdo
    </span>
    <div style="display: -webkit-inline-box; float:right;">
        <button type="submit" class="btn btn-primary" style="margin-left: 10px;" (click)="getPosts()">
            Salvar alterações
            <fa-icon [icon]="faCheck"></fa-icon>
        </button>
    </div>

</div>

<form [formGroup]="postsBlogForm" (ngSubmit)="onSubmit()">
    <div class="container margin-title">
        <tabset>
            <tab heading="Conteudo" id="tabConteudo">
                <div class="d-inline p-2">
                    <div class="d-inline p-2 marging-input ">

                        <label class="label">Qual é a categoria?</label>
                        <div class="control">
                            <div class="select"
                                [ngClass]="{ 'is-success': submitted && !f.categoriaId.errors, 'is-danger' : submitted && f.categoriaId.errors }">
                                <select formControlName="categoriaId" class="form-control input w-25 p-2">
                                    <option value="">Selecione..</option>
                                    <option *ngFor="let categoria of categorias" [value]="categoria.id">
                                        {{categoria.descricao}}</option>
                                </select>
                            </div>
                        </div>
                        <div *ngIf="submitted" class="errors">
                            <p *ngFor="let error of getErrors(f.categoriaId)" class="help is-danger">
                                {{error}}
                            </p>
                        </div>
                    </div>
                    <div class="d-inline p-2 marging-input marg">
                        <label class="label">Ativar Post?</label>
                        <div class="buttons has-addons d-inline p-2">
                            <button type="button" class="button is-danger is-selected"
                                [ngClass]="{'is-danger': !isPostAtivo, 'is-selected': !isPostAtivo}"
                                (click)="changeStatusPost('0', false)">
                                Não
                            </button>
                            <button type="button" class="button"
                                [ngClass]="{'is-success': isPostAtivo, 'is-selected': isPostAtivo}"
                                (click)="changeStatusPost('1', true)">
                                Sim
                            </button>
                        </div>
                        <label class="label">Destacar Post?</label>
                        <div class="buttons has-addons d-inline p-2">

                            <button type="button" class="button is-danger is-selected"
                                [ngClass]="{'is-danger': !isPostDestaque, 'is-selected': !isPostDestaque}"
                                (click)="changeStatusDestaque('0', false)">
                                Não
                            </button>
                            <button type="button" class="button"
                                [ngClass]="{'is-success': isPostDestaque, 'is-selected': isPostDestaque}"
                                (click)="changeStatusDestaque('1', true)">
                                Sim
                            </button>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field marging-input">
                            <label class="label">Título</label>
                            <div class="control">
                                <input formControlName="titulo" class="form-control input" type="text" placeholder=""
                                    [ngClass]="{ 'is-success': submitted && !f.titulo.errors, 'is-danger' : submitted && f.titulo.errors }">
                            </div>
                            <div *ngIf="submitted" class="errors">
                                <p *ngFor="let error of getErrors(f.titulo)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="field marging-input">
                            <label class="label">Subtítulo</label>
                            <div class="control">
                                <input
                                    [ngClass]="{ 'is-success': submitted && !f.subtitulo.errors, 'is-danger' : submitted && f.subtitulo.errors }"
                                    formControlName="subtitulo" class="form-control input" type="text" placeholder="">
                            </div>
                            <div *ngIf="submitted" class="errors">
                                <p *ngFor="let error of getErrors(f.subtitulo)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="field marging-input">
                    <label class="label">Descrição Prévia</label>
                    <div class="control ">
                        <textarea formControlName="descricaoPrevia"
                            [ngClass]="{ 'is-success': submitted && !f.descricaoPrevia.errors, 'is-danger' : submitted && f.descricaoPrevia.errors }"
                            class="form-control textarea " placeholder="" rows="5"></textarea>
                    </div>
                    <div *ngIf="submitted" class="errors">
                        <p *ngFor="let error of getErrors(f.descricaoPrevia)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>
                <div class="field marging-input">
                    <label class="label">Descrição</label>
                    <ckeditor formControlName="descricao"
                        [ngClass]="{ 'is-success': submitted && !f.descricao.errors, 'is-danger' : submitted && f.descricao.errors }"
                        [editor]="editor" (ready)="onReady($event)">
                    </ckeditor>
                    <div *ngIf="submitted" class="errors">
                        <p *ngFor="let error of getErrors(f.descricao.errors)" class="help is-danger">
                            {{error}}
                        </p>
                    </div>
                </div>




            </tab>
            <tab heading="Opções" id="tabOpcoes">
                <div class="column marging-input">
                    <div class="field">
                        <label class="label">Imagem</label>
                        <div class="input-group mb-2">
                            <label class="custom-file-label">
                                <input class="custom-file-input" type="file"
                                    (change)="updateFileName($event.srcElement.files)">
                                <span class="file-cta">
                                    <span class="file-icon">
                                        <!-- <fa-icon [icon]="faUpload"></fa-icon> -->
                                    </span>
                                    <span class="custom-file-label">
                                        Escolha um arquivo…
                                    </span>
                                </span>
                                <span class="custom-file-label">
                                    {{arquivoNome}}
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="columns marging-box">
                    <div class="column marging-input">
                        <div class="field ">
                            <label class="label labelTeste">Quando será publicado?</label>
                            <div class="control"
                                [ngClass]="{ 'is-success': submitted && !f.dataPublicacao.errors, 'is-danger' : submitted && f.dataPublicacao.errors }">
                                <input id="dataPublicacao" formControlName="dataPublicacao"
                                    class="form-control input data w-25 p-2" type="date"
                                    placeholder="Selecione uma data">
                            </div>
                            <div *ngIf="submitted" class="errors">
                                <p *ngFor="let error of getErrors(f.dataPublicacao)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="column marging-input">
                        <div class="field ">
                            <label class="label">Quando deverá ser removido?</label>
                            <div class="control">
                                <input id="dataExpiracao" formControlName="dataExpiracao"
                                    [ngClass]="{ 'is-success': submitted && !f.dataExpiracao.errors, 'is-danger' : submitted && f.dataExpiracao.errors }"
                                    class="form-control input w-25 p-2" type="date" placeholder="Selecione uma data">
                            </div>
                            <div *ngIf="submitted" class="errors">
                                <p *ngFor="let error of getErrors(f.dataExpiracao)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </tab>
            <!-- SEO -->
            <tab heading="SEO" id="tabSeo">
                <div class="columns">
                    <div class="column marging-input">
                        <p>
                            A SEO (Otimização para motores de busca) melhora sua classificação nos resultados de buscas.
                            <br />Use esses recursos para que os usuários localizem um item com mais facilidade durante
                            a busca.
                        </p>
                        <div class="field" class="marging-input">
                            <label class="label">Título para SEO</label>
                            <div class="control">
                                <input formControlName="tituloPaginaSEO" class="form-control" type="text" placeholder=""
                                    [ngClass]="{ 'is-success': submitted && !f.tituloPaginaSEO.errors, 'is-danger' : submitted && f.tituloPaginaSEO.errors }">
                            </div>
                            <div *ngIf="submitted" class="errors">
                                <p *ngFor="let error of getErrors(f.tituloPaginaSEO)" class="help is-danger">
                                    {{error}}
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="column">
                    <div class="field">
                        <label class="label">Descrição para SEO</label>
                        <div class="control">
                            <textarea formControlName="descricaoPaginaSEO"
                                [ngClass]="{ 'is-success': submitted && !f.descricaoPaginaSEO.errors, 'is-danger' : submitted && f.descricaoPaginaSEO.errors }"
                                class="form-control textarea" placeholder="" rows="4"></textarea>
                        </div>
                        <div *ngIf="submitted" class="errors">
                            <p *ngFor="let error of getErrors(f.descricaoPaginaSEO)" class="help is-danger">
                                {{error}}
                            </p>
                        </div>
                    </div>
                </div>
                <section>
                    <div class="">
                        <div class="container margin-title">
                            <h5 class="subtitle">
                                Tags
                            </h5>
                            <div class="tags are-medium">
                                <span (click)="toggleTag(tag)" *ngFor="let tag of tags" class="tag is-clickable"
                                    [ngClass]="{'is-success' : tag.selected, 'is-danger' : !tag.selected}">
                                    {{tag.descricao}}
                                </span>
                            </div>
                        </div>
                    </div>
                </section>
            </tab>
            <tab heading="Redes Sociais" id="tabRedesSociais"></tab>
        </tabset>



    </div>

    <!-- <footer class="footer">
        <p class="footer-item">
            <button routerLink="/neocms/posts-blog" routerLinkActive="active" class="button is-light" type="button">
                Fechar &nbsp;
                <fa-icon [icon]="faTimes"></fa-icon>
            </button>
        </p>
        <p class="card-footer-item">
            <button class="button is-primary" type="submit">
                Gravar &nbsp;
                <fa-icon [icon]="faCheck"></fa-icon>
            </button>
        </p>
    </footer> -->

</form>